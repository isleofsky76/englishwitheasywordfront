// 단어장 데이터 - 날짜별로 구성
const wordsByDate = {
    "20250912": [
        {
            "word": "allegation",
            "korean_pronunciation": "앨리게이션",
            "english_pronunciation": "/ˌælɪˈɡeɪʃən/",
            "meaning": "혐의, 주장",
            "language": "en-GB"
        },
        {
            "word": "apprehend",
            "korean_pronunciation": "애프리헨드",
            "english_pronunciation": "/ˌæprɪˈhɛnd/",
            "meaning": "체포하다, 이해하다",
            "language": "en-GB"
        },
        {
            "word": "assailant",
            "korean_pronunciation": "어세일런트",
            "english_pronunciation": "/əˈseɪlənt/",
            "meaning": "공격자, 가해자",
            "language": "en-GB"
        },
        {
            "word": "authenticity",
            "korean_pronunciation": "오센티시티",
            "english_pronunciation": "/ˌɔːθenˈtɪsəti/",
            "meaning": "진정성, 진위",
            "language": "en-GB"
        },
        {
            "word": "ballistics",
            "korean_pronunciation": "벌리스틱스",
            "english_pronunciation": "/bəˈlɪstɪks/",
            "meaning": "탄도학",
            "language": "en-GB"
        },
        {
            "word": "camouflage",
            "korean_pronunciation": "카머플라주",
            "english_pronunciation": "/ˈkæməflɑːʒ/",
            "meaning": "위장",
            "language": "en-GB"
        },
        {
            "word": "chaotic",
            "korean_pronunciation": "케이오틱",
            "english_pronunciation": "/keɪˈɒtɪk/",
            "meaning": "혼돈의, 무질서한",
            "language": "en-GB"
        },
        {
            "word": "circumstantial",
            "korean_pronunciation": "서컴스탠셜",
            "english_pronunciation": "/ˌsɜːkəmˈstænʃəl/",
            "meaning": "정황적인",
            "language": "en-GB"
        },
        {
            "word": "clandestine",
            "korean_pronunciation": "클랜데스틴",
            "english_pronunciation": "/ˈklændəstaɪn/",
            "meaning": "비밀리에 하는",
            "language": "en-GB"
        },
        {
            "word": "conspicuous",
            "korean_pronunciation": "컨스피큐어스",
            "english_pronunciation": "/kənˈspɪkjuəs/",
            "meaning": "눈에 잘 띄는",
            "language": "en-GB"
        },
        {
            "word": "contradictory",
            "korean_pronunciation": "컨트러딕토리",
            "english_pronunciation": "/ˌkɒntrəˈdɪktəri/",
            "meaning": "모순된",
            "language": "en-GB"
        },
        {
            "word": "credibility",
            "korean_pronunciation": "크레더빌리티",
            "english_pronunciation": "/ˌkrɛdəˈbɪləti/",
            "meaning": "신뢰성",
            "language": "en-GB"
        },
        {
            "word": "culpable",
            "korean_pronunciation": "컬퍼블",
            "english_pronunciation": "/ˈkʌlpəbl/",
            "meaning": "비난받을 만한",
            "language": "en-GB"
        },
        {
            "word": "deceptive",
            "korean_pronunciation": "디셉티브",
            "english_pronunciation": "/dɪˈsɛptɪv/",
            "meaning": "속이는, 현혹하는",
            "language": "en-GB"
        },
        {
            "word": "definitive",
            "korean_pronunciation": "디피니티브",
            "english_pronunciation": "/dɪˈfɪnɪtɪv/",
            "meaning": "최종적인, 결정적인",
            "language": "en-GB"
        },
        {
            "word": "detrimental",
            "korean_pronunciation": "데트리멘털",
            "english_pronunciation": "/ˌdɛtrɪˈmɛntl/",
            "meaning": "해로운",
            "language": "en-GB"
        },
        {
            "word": "discrepancy",
            "korean_pronunciation": "디스크레펀시",
            "english_pronunciation": "/dɪsˈkrɛpənsi/",
            "meaning": "불일치",
            "language": "en-GB"
        },
        {
            "word": "elusive",
            "korean_pronunciation": "일루시브",
            "english_pronunciation": "/ɪˈluːsɪv/",
            "meaning": "찾기 힘든, 규정하기 어려운",
            "language": "en-GB"
        },
        {
            "word": "emphatic",
            "korean_pronunciation": "엠패틱",
            "english_pronunciation": "/ɪmˈfætɪk/",
            "meaning": "강조하는, 단호한",
            "language": "en-GB"
        },
        {
            "word": "eradicate",
            "korean_pronunciation": "이래디케이트",
            "english_pronunciation": "/ɪˈrædɪkeɪt/",
            "meaning": "근절하다",
            "language": "en-GB"
        },
        {
            "word": "evacuate",
            "korean_pronunciation": "이배큐에이트",
            "english_pronunciation": "/ɪˈvækjueɪt/",
            "meaning": "대피시키다",
            "language": "en-GB"
        },
        {
            "word": "forensic",
            "korean_pronunciation": "포렌식",
            "english_pronunciation": "/fəˈrɛnsɪk/",
            "meaning": "법의학적인",
            "language": "en-GB"
        },
        {
            "word": "formidable",
            "korean_pronunciation": "포미더블",
            "english_pronunciation": "/ˈfɔːmɪdəbl/",
            "meaning": "어마어마한, 위협적인",
            "language": "en-GB"
        },
        {
            "word": "fugitive",
            "korean_pronunciation": "퓨저티브",
            "english_pronunciation": "/ˈfjuːdʒətɪv/",
            "meaning": "도망자",
            "language": "en-GB"
        },
        {
            "word": "hostile",
            "korean_pronunciation": "호스틸",
            "english_pronunciation": "/ˈhɒstaɪl/",
            "meaning": "적대적인",
            "language": "en-GB"
        },
        {
            "word": "illicit",
            "korean_pronunciation": "일리싯",
            "english_pronunciation": "/ɪˈlɪsɪt/",
            "meaning": "불법의",
            "language": "en-GB"
        },
        {
            "word": "infiltrate",
            "korean_pronunciation": "인필트레이트",
            "english_pronunciation": "/ˈɪnfɪltreɪt/",
            "meaning": "잠입하다, 침투하다",
            "language": "en-GB"
        },
        {
            "word": "inflammatory",
            "korean_pronunciation": "인플래머토리",
            "english_pronunciation": "/ɪnˈflæmətri/",
            "meaning": "선동적인, 염증을 일으키는",
            "language": "en-GB"
        },
        {
            "word": "insidious",
            "korean_pronunciation": "인시디어스",
            "english_pronunciation": "/ɪnˈsɪdiəs/",
            "meaning": "교묘한, 서서히 퍼지는",
            "language": "en-GB"
        },
        {
            "word": "intimidate",
            "korean_pronunciation": "인티미데이트",
            "english_pronunciation": "/ɪnˈtɪmɪdeɪt/",
            "meaning": "겁주다, 위협하다",
            "language": "en-GB"
        },
        {
            "word": "jurisdiction",
            "korean_pronunciation": "주리스딕션",
            "english_pronunciation": "/ˌdʒʊərɪsˈdɪkʃən/",
            "meaning": "관할권",
            "language": "en-GB"
        },
        {
            "word": "legitimate",
            "korean_pronunciation": "레지티미트",
            "english_pronunciation": "/lɪˈdʒɪtɪmət/",
            "meaning": "합법적인, 정당한",
            "language": "en-GB"
        },
        {
            "word": "lethal",
            "korean_pronunciation": "리썰",
            "english_pronunciation": "/ˈliːθəl/",
            "meaning": "치명적인",
            "language": "en-GB"
        },
        {
            "word": "manipulate",
            "korean_pronunciation": "매니퓰레이트",
            "english_pronunciation": "/məˈnɪpjuleɪt/",
            "meaning": "조종하다, 조작하다",
            "language": "en-GB"
        },
        {
            "word": "menacing",
            "korean_pronunciation": "메너싱",
            "english_pronunciation": "/ˈmɛnəsɪŋ/",
            "meaning": "위협적인",
            "language": "en-GB"
        },
        {
            "word": "meticulous",
            "korean_pronunciation": "메티큘러스",
            "english_pronunciation": "/məˈtɪkjʊləs/",
            "meaning": "꼼꼼한",
            "language": "en-GB"
        },
        {
            "word": "notorious",
            "korean_pronunciation": "노토리어스",
            "english_pronunciation": "/nəʊˈtɔːriəs/",
            "meaning": "악명 높은",
            "language": "en-GB"
        },
        {
            "word": "obstruction",
            "korean_pronunciation": "옵스트럭션",
            "english_pronunciation": "/əbˈstrʌkʃən/",
            "meaning": "방해, 장애",
            "language": "en-GB"
        },
        {
            "word": "ominous",
            "korean_pronunciation": "오미너스",
            "english_pronunciation": "/ˈɒmɪnəs/",
            "meaning": "불길한",
            "language": "en-GB"
        },
        {
            "word": "perpetrator",
            "korean_pronunciation": "펄퍼트레이터",
            "english_pronunciation": "/ˈpɜːpɪtreɪtə/",
            "meaning": "범인, 가해자",
            "language": "en-GB"
        },
        {
            "word": "premeditated",
            "korean_pronunciation": "프리메디테이티드",
            "english_pronunciation": "/ˌpriːˈmɛdɪteɪtɪd/",
            "meaning": "계획적인, 고의적인",
            "language": "en-GB"
        },
        {
            "word": "prosecutor",
            "korean_pronunciation": "프로시큐터",
            "english_pronunciation": "/ˈprɒsɪkjuːtə/",
            "meaning": "검사, 기소자",
            "language": "en-GB"
        },
        {
            "word": "repercussion",
            "korean_pronunciation": "리퍼커션",
            "english_pronunciation": "/ˌriːpəˈkʌʃən/",
            "meaning": "영향, 파급 효과",
            "language": "en-GB"
        },
        {
            "word": "retaliate",
            "korean_pronunciation": "리탤리에이트",
            "english_pronunciation": "/rɪˈtælieɪt/",
            "meaning": "보복하다",
            "language": "en-GB"
        },
        {
            "word": "scrutiny",
            "korean_pronunciation": "스크루티니",
            "english_pronunciation": "/ˈskruːtɪni/",
            "meaning": "정밀조사",
            "language": "en-GB"
        },
        {
            "word": "surveillance",
            "korean_pronunciation": "서베일런스",
            "english_pronunciation": "/səˈveɪləns/",
            "meaning": "감시",
            "language": "en-GB"
        },
        {
            "word": "unsubstantiated",
            "korean_pronunciation": "언섭스탠시에이티드",
            "english_pronunciation": "/ˌʌnsəbˈstænʃieɪtɪd/",
            "meaning": "입증되지 않은",
            "language": "en-GB"
        },
        {
            "word": "vindictive",
            "korean_pronunciation": "빈딕티브",
            "english_pronunciation": "/vɪnˈdɪktɪv/",
            "meaning": "앙심을 품은, 보복적인",
            "language": "en-GB"
        }
    ],
    "20250911": [
        {
            "word": "detention",
            "korean_pronunciation": "디텐션",
            "english_pronunciation": "/dɪˈtenʃən/",
            "meaning": "구금, 억류",
            "language": "en-GB"
        },
        {
            "word": "raid",
            "korean_pronunciation": "레이드",
            "english_pronunciation": "/reɪd/",
            "meaning": "급습, 단속",
            "language": "en-GB"
        },
        {
            "word": "immigration",
            "korean_pronunciation": "이미그레이션",
            "english_pronunciation": "/ˌɪmɪˈɡreɪʃən/",
            "meaning": "이민",
            "language": "en-GB"
        },
        {
            "word": "unauthorized",
            "korean_pronunciation": "언오소라이즈드",
            "english_pronunciation": "/ʌnˈɔːθəraɪzd/",
            "meaning": "무단의, 불법의",
            "language": "en-GB"
        },
        {
            "word": "probe",
            "korean_pronunciation": "프로브",
            "english_pronunciation": "/prəʊb/",
            "meaning": "조사, 수사",
            "language": "en-GB"
        },
        {
            "word": "venture",
            "korean_pronunciation": "벤처",
            "english_pronunciation": "/ˈventʃər/",
            "meaning": "투자, 사업",
            "language": "en-GB"
        },
        {
            "word": "construction",
            "korean_pronunciation": "컨스트럭션",
            "english_pronunciation": "/kənˈstrʌkʃən/",
            "meaning": "건설",
            "language": "en-GB"
        },
        {
            "word": "supplier",
            "korean_pronunciation": "서플라이어",
            "english_pronunciation": "/səˈplaɪər/",
            "meaning": "공급업체",
            "language": "en-GB"
        },
        {
            "word": "subcontractor",
            "korean_pronunciation": "서브컨트랙터",
            "english_pronunciation": "/ˌsʌbkənˈtræktər/",
            "meaning": "하청업체",
            "language": "en-GB"
        },
        {
            "word": "facility",
            "korean_pronunciation": "퍼실리티",
            "english_pronunciation": "/fəˈsɪləti/",
            "meaning": "시설, 공장",
            "language": "en-GB"
        },
        {
            "word": "manufacturing",
            "korean_pronunciation": "매뉴팩처링",
            "english_pronunciation": "/ˌmænjuˈfæktʃərɪŋ/",
            "meaning": "제조업",
            "language": "en-GB"
        },
        {
            "word": "multibillion",
            "korean_pronunciation": "멀티빌리언",
            "english_pronunciation": "/ˌmʌltiˈbɪljən/",
            "meaning": "수십억의",
            "language": "en-GB"
        },
        {
            "word": "investment",
            "korean_pronunciation": "인베스트먼트",
            "english_pronunciation": "/ɪnˈvestmənt/",
            "meaning": "투자",
            "language": "en-GB"
        },
        {
            "word": "waiver",
            "korean_pronunciation": "웨이버",
            "english_pronunciation": "/ˈweɪvər/",
            "meaning": "면제",
            "language": "en-GB"
        },
        {
            "word": "program",
            "korean_pronunciation": "프로그램",
            "english_pronunciation": "/ˈprəʊɡræm/",
            "meaning": "프로그램",
            "language": "en-GB"
        },
        {
            "word": "business",
            "korean_pronunciation": "비즈니스",
            "english_pronunciation": "/ˈbɪznəs/",
            "meaning": "비즈니스, 사업",
            "language": "en-GB"
        },
        {
            "word": "tourist",
            "korean_pronunciation": "투어리스트",
            "english_pronunciation": "/ˈtʊərɪst/",
            "meaning": "관광객",
            "language": "en-GB"
        },
        {
            "word": "permit",
            "korean_pronunciation": "퍼밋",
            "english_pronunciation": "/pərˈmɪt/",
            "meaning": "허가",
            "language": "en-GB"
        },
        {
            "word": "compliance",
            "korean_pronunciation": "컴플라이언스",
            "english_pronunciation": "/kəmˈplaɪəns/",
            "meaning": "준수, 법규 이행",
            "language": "en-GB"
        },
        {
            "word": "regulation",
            "korean_pronunciation": "레귤레이션",
            "english_pronunciation": "/ˌreɡjuˈleɪʃən/",
            "meaning": "규제",
            "language": "en-GB"
        },
        {
            "word": "gray",
            "korean_pronunciation": "그레이",
            "english_pronunciation": "/ɡreɪ/",
            "meaning": "회색의, 모호한",
            "language": "en-GB"
        },
        {
            "word": "area",
            "korean_pronunciation": "에어리어",
            "english_pronunciation": "/ˈeəriə/",
            "meaning": "영역, 지역",
            "language": "en-GB"
        },
        {
            "word": "chief",
            "korean_pronunciation": "치프",
            "english_pronunciation": "/tʃiːf/",
            "meaning": "최고의, 책임자",
            "language": "en-GB"
        },
      
        {
            "word": "officer",
            "korean_pronunciation": "오피서",
            "english_pronunciation": "/ˈɒfɪsər/",
            "meaning": "관리자, 책임자",
            "language": "en-GB"
        },
        {
            "word": "dispatch",
            "korean_pronunciation": "디스패치",
            "english_pronunciation": "/dɪˈspætʃ/",
            "meaning": "파견하다",
            "language": "en-GB"
        },
        {
            "word": "suspend",
            "korean_pronunciation": "서스펜드",
            "english_pronunciation": "/səˈspend/",
            "meaning": "중단하다",
            "language": "en-GB"
        },
     
        {
            "word": "consular",
            "korean_pronunciation": "컨슐러",
            "english_pronunciation": "/ˈkɒnsjələr/",
            "meaning": "영사의",
            "language": "en-GB"
        },
        
        {
            "word": "fallout",
            "korean_pronunciation": "폴아웃",
            "english_pronunciation": "/ˈfɔːlaʊt/",
            "meaning": "여파, 부정적 영향",
            "language": "en-GB"
        },
        {
            "word": "instability",
            "korean_pronunciation": "인스터빌리티",
            "english_pronunciation": "/ˌɪnstəˈbɪləti/",
            "meaning": "불안정",
            "language": "en-GB"
        },
        {
            "word": "uncertainty",
            "korean_pronunciation": "언서턴티",
            "english_pronunciation": "/ʌnˈsɜːtənti/",
            "meaning": "불확실성",
            "language": "en-GB"
        },
        {
            "word": "navigate",
            "korean_pronunciation": "내비게이트",
            "english_pronunciation": "/ˈnævɪɡeɪt/",
            "meaning": "헤쳐 나가다, 대응하다",
            "language": "en-GB"
        },
        {
            "word": "monitor",
            "korean_pronunciation": "모니터",
            "english_pronunciation": "/ˈmɒnɪtər/",
            "meaning": "면밀히 관찰하다",
            "language": "en-GB"
        }
    ],
};

let currentWordIndex = 0;

// DOM 요소들
const wordContainer = document.getElementById('article-container');
const wordPopup = document.getElementById('wordPopup');
const popupWord = document.querySelector('.popup-word');
const popupMeaning = document.querySelector('.popup-meaning');
const popupClose = document.querySelector('.popup-close');

// 현재 날짜 설정 (YYYYMMDD 형식)
function getCurrentDate() {
    const now = new Date();
    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const day = String(now.getDate()).padStart(2, '0');
    return `${year}${month}${day}`;
}

// 현재 날짜의 단어들 가져오기
function getWordsForDate(date) {
    return wordsByDate[date] || [];
}

// 사용 가능한 날짜 목록 가져오기 (최신 날짜부터)
function getAvailableDates() {
    return Object.keys(wordsByDate).sort().reverse();
}



// 모든 단어 표시 (모든 날짜를 아래로 쭉 나열)
function displayAllWords() {
    const availableDates = getAvailableDates();
    let allWordsHTML = '';
    
    availableDates.forEach(date => {
        const words = getWordsForDate(date);
        let wordsText = '';
        
        if (words.length > 0) {
            words.forEach((word, index) => {
                wordsText += `${index + 1}. <span class="word-part word-english">${word.word}</span> / <span class="word-part word-korean">${word.korean_pronunciation}</span> / <span class="word-part word-phonetic">${word.english_pronunciation}</span> / <span class="word-part word-meaning">${word.meaning}</span><br>`;
            });
            
            allWordsHTML += `
                <div class="words-title">오늘의 뉴스 단어(${date})</div>
                <div class="words-text">${wordsText}</div>
                <div class="date-spacing"></div>
            `;
        }
    });
    
    wordContainer.innerHTML = allWordsHTML;
}




// 초기화
function init() {
    displayAllWords();
}

// 이벤트 리스너 등록
document.addEventListener('DOMContentLoaded', function() {
    // 단어장 초기화
    init();
    
    // Home 링크 클릭 이벤트
    const homeLink = document.querySelector('.nav-link[href="https://englisheasystudy.com/"]');
    if (homeLink) {
        homeLink.addEventListener('click', function(e) {
            e.preventDefault();
            window.location.href = 'https://englisheasystudy.com/';
        });
    }
    
    // 팝업 관련 이벤트
    if (popupClose) {
    popupClose.addEventListener('click', closePopup);
    }
    
    // 팝업 외부 클릭 시 닫기
    if (wordPopup) {
    wordPopup.addEventListener('click', function(e) {
        if (e.target === wordPopup) {
            closePopup();
        }
    });
    }
});

// 팝업 닫기
function closePopup() {
    if (wordPopup) {
    wordPopup.style.display = 'none';
    }
}

// 키보드 단축키
document.addEventListener('keydown', function(e) {
    // Escape로 팝업 닫기
    if (e.key === 'Escape') {
        closePopup();
    }
});
