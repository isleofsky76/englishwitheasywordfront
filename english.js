const wordsByDate = {
   
    "20250911": [
        {
            "word": "detention",
            "korean_pronunciation": "ë””í…ì…˜",
            "english_pronunciation": "/dÉªËˆtenÊƒÉ™n/",
            "meaning": "êµ¬ê¸ˆ, ì–µë¥˜",
            "language": "en-GB"
        },
        {
            "word": "raid",
            "korean_pronunciation": "ë ˆì´ë“œ",
            "english_pronunciation": "/reÉªd/",
            "meaning": "ê¸‰ìŠµ, ë‹¨ì†",
            "language": "en-GB"
        },
        {
            "word": "immigration",
            "korean_pronunciation": "ì´ë¯¸ê·¸ë ˆì´ì…˜",
            "english_pronunciation": "/ËŒÉªmÉªËˆÉ¡reÉªÊƒÉ™n/",
            "meaning": "ì´ë¯¼",
            "language": "en-GB"
        },
        {
            "word": "unauthorized",
            "korean_pronunciation": "ì–¸ì˜¤ì†Œë¼ì´ì¦ˆë“œ",
            "english_pronunciation": "/ÊŒnËˆÉ”ËÎ¸É™raÉªzd/",
            "meaning": "ë¬´ë‹¨ì˜, ë¶ˆë²•ì˜",
            "language": "en-GB"
        },
        {
            "word": "probe",
            "korean_pronunciation": "í”„ë¡œë¸Œ",
            "english_pronunciation": "/prÉ™ÊŠb/",
            "meaning": "ì¡°ì‚¬, ìˆ˜ì‚¬",
            "language": "en-GB"
        },
        {
            "word": "venture",
            "korean_pronunciation": "ë²¤ì²˜",
            "english_pronunciation": "/ËˆventÊƒÉ™r/",
            "meaning": "íˆ¬ì, ì‚¬ì—…",
            "language": "en-GB"
        },
        {
            "word": "construction",
            "korean_pronunciation": "ì»¨ìŠ¤íŠ¸ëŸ­ì…˜",
            "english_pronunciation": "/kÉ™nËˆstrÊŒkÊƒÉ™n/",
            "meaning": "ê±´ì„¤",
            "language": "en-GB"
        },
        {
            "word": "supplier",
            "korean_pronunciation": "ì„œí”Œë¼ì´ì–´",
            "english_pronunciation": "/sÉ™ËˆplaÉªÉ™r/",
            "meaning": "ê³µê¸‰ì—…ì²´",
            "language": "en-GB"
        },
        {
            "word": "subcontractor",
            "korean_pronunciation": "ì„œë¸Œì»¨íŠ¸ë™í„°",
            "english_pronunciation": "/ËŒsÊŒbkÉ™nËˆtrÃ¦ktÉ™r/",
            "meaning": "í•˜ì²­ì—…ì²´",
            "language": "en-GB"
        },
        {
            "word": "facility",
            "korean_pronunciation": "í¼ì‹¤ë¦¬í‹°",
            "english_pronunciation": "/fÉ™ËˆsÉªlÉ™ti/",
            "meaning": "ì‹œì„¤, ê³µì¥",
            "language": "en-GB"
        },
        {
            "word": "manufacturing",
            "korean_pronunciation": "ë§¤ë‰´íŒ©ì²˜ë§",
            "english_pronunciation": "/ËŒmÃ¦njuËˆfÃ¦ktÊƒÉ™rÉªÅ‹/",
            "meaning": "ì œì¡°ì—…",
            "language": "en-GB"
        },
        {
            "word": "multibillion",
            "korean_pronunciation": "ë©€í‹°ë¹Œë¦¬ì–¸",
            "english_pronunciation": "/ËŒmÊŒltiËˆbÉªljÉ™n/",
            "meaning": "ìˆ˜ì‹­ì–µì˜",
            "language": "en-GB"
        },
        {
            "word": "investment",
            "korean_pronunciation": "ì¸ë² ìŠ¤íŠ¸ë¨¼íŠ¸",
            "english_pronunciation": "/ÉªnËˆvestmÉ™nt/",
            "meaning": "íˆ¬ì",
            "language": "en-GB"
        },
        {
            "word": "waiver",
            "korean_pronunciation": "ì›¨ì´ë²„",
            "english_pronunciation": "/ËˆweÉªvÉ™r/",
            "meaning": "ë©´ì œ",
            "language": "en-GB"
        },
        {
            "word": "program",
            "korean_pronunciation": "í”„ë¡œê·¸ë¨",
            "english_pronunciation": "/ËˆprÉ™ÊŠÉ¡rÃ¦m/",
            "meaning": "í”„ë¡œê·¸ë¨",
            "language": "en-GB"
        },
        {
            "word": "business",
            "korean_pronunciation": "ë¹„ì¦ˆë‹ˆìŠ¤",
            "english_pronunciation": "/ËˆbÉªznÉ™s/",
            "meaning": "ë¹„ì¦ˆë‹ˆìŠ¤, ì‚¬ì—…",
            "language": "en-GB"
        },
        {
            "word": "tourist",
            "korean_pronunciation": "íˆ¬ì–´ë¦¬ìŠ¤íŠ¸",
            "english_pronunciation": "/ËˆtÊŠÉ™rÉªst/",
            "meaning": "ê´€ê´‘ê°",
            "language": "en-GB"
        },
        {
            "word": "permit",
            "korean_pronunciation": "í¼ë°‹",
            "english_pronunciation": "/pÉ™rËˆmÉªt/",
            "meaning": "í—ˆê°€",
            "language": "en-GB"
        },
        {
            "word": "compliance",
            "korean_pronunciation": "ì»´í”Œë¼ì´ì–¸ìŠ¤",
            "english_pronunciation": "/kÉ™mËˆplaÉªÉ™ns/",
            "meaning": "ì¤€ìˆ˜, ë²•ê·œ ì´í–‰",
            "language": "en-GB"
        },
        {
            "word": "regulation",
            "korean_pronunciation": "ë ˆê·¤ë ˆì´ì…˜",
            "english_pronunciation": "/ËŒreÉ¡juËˆleÉªÊƒÉ™n/",
            "meaning": "ê·œì œ",
            "language": "en-GB"
        },
        {
            "word": "gray",
            "korean_pronunciation": "ê·¸ë ˆì´",
            "english_pronunciation": "/É¡reÉª/",
            "meaning": "íšŒìƒ‰ì˜, ëª¨í˜¸í•œ",
            "language": "en-GB"
        },
        {
            "word": "area",
            "korean_pronunciation": "ì—ì–´ë¦¬ì–´",
            "english_pronunciation": "/ËˆeÉ™riÉ™/",
            "meaning": "ì˜ì—­, ì§€ì—­",
            "language": "en-GB"
        },
        {
            "word": "chief",
            "korean_pronunciation": "ì¹˜í”„",
            "english_pronunciation": "/tÊƒiËf/",
            "meaning": "ìµœê³ ì˜, ì±…ì„ì",
            "language": "en-GB"
        },
      
        {
            "word": "officer",
            "korean_pronunciation": "ì˜¤í”¼ì„œ",
            "english_pronunciation": "/ËˆÉ’fÉªsÉ™r/",
            "meaning": "ê´€ë¦¬ì, ì±…ì„ì",
            "language": "en-GB"
        },
        {
            "word": "dispatch",
            "korean_pronunciation": "ë””ìŠ¤íŒ¨ì¹˜",
            "english_pronunciation": "/dÉªËˆspÃ¦tÊƒ/",
            "meaning": "íŒŒê²¬í•˜ë‹¤",
            "language": "en-GB"
        },
        {
            "word": "suspend",
            "korean_pronunciation": "ì„œìŠ¤íœë“œ",
            "english_pronunciation": "/sÉ™Ëˆspend/",
            "meaning": "ì¤‘ë‹¨í•˜ë‹¤",
            "language": "en-GB"
        },
        {
            "word": "videoconference",
            "korean_pronunciation": "ë¹„ë””ì˜¤ì»¨í¼ëŸ°ìŠ¤",
            "english_pronunciation": "/ËˆvÉªdiÉ™ÊŠËŒkÉ’nfÉ™rÉ™ns/",
            "meaning": "í™”ìƒ íšŒì˜",
            "language": "en-GB"
        },
        {
            "word": "consular",
            "korean_pronunciation": "ì»¨ìŠëŸ¬",
            "english_pronunciation": "/ËˆkÉ’nsjÉ™lÉ™r/",
            "meaning": "ì˜ì‚¬ì˜",
            "language": "en-GB"
        },
        {
            "word": "services",
            "korean_pronunciation": "ì„œë¹„ìŠ¤ì¦ˆ",
            "english_pronunciation": "/ËˆsÉœËvÉªsÉªz/",
            "meaning": "ì„œë¹„ìŠ¤",
            "language": "en-GB"
        },
        {
            "word": "fallout",
            "korean_pronunciation": "í´ì•„ì›ƒ",
            "english_pronunciation": "/ËˆfÉ”ËlaÊŠt/",
            "meaning": "ì—¬íŒŒ, ë¶€ì •ì  ì˜í–¥",
            "language": "en-GB"
        },
        {
            "word": "instability",
            "korean_pronunciation": "ì¸ìŠ¤í„°ë¹Œë¦¬í‹°",
            "english_pronunciation": "/ËŒÉªnstÉ™ËˆbÉªlÉ™ti/",
            "meaning": "ë¶ˆì•ˆì •",
            "language": "en-GB"
        },
        {
            "word": "uncertainty",
            "korean_pronunciation": "ì–¸ì„œí„´í‹°",
            "english_pronunciation": "/ÊŒnËˆsÉœËtÉ™nti/",
            "meaning": "ë¶ˆí™•ì‹¤ì„±",
            "language": "en-GB"
        },
        {
            "word": "navigate",
            "korean_pronunciation": "ë‚´ë¹„ê²Œì´íŠ¸",
            "english_pronunciation": "/ËˆnÃ¦vÉªÉ¡eÉªt/",
            "meaning": "í—¤ì³ ë‚˜ê°€ë‹¤, ëŒ€ì‘í•˜ë‹¤",
            "language": "en-GB"
        },
        {
            "word": "monitor",
            "korean_pronunciation": "ëª¨ë‹ˆí„°",
            "english_pronunciation": "/ËˆmÉ’nÉªtÉ™r/",
            "meaning": "ë©´ë°€íˆ ê´€ì°°í•˜ë‹¤",
            "language": "en-GB"
        }
    ]
};

let currentWordIndex = 0;

// DOM ìš”ì†Œë“¤
const wordContainer = document.getElementById('article-container');
const wordPopup = document.getElementById('wordPopup');
const popupWord = document.querySelector('.popup-word');
const popupMeaning = document.querySelector('.popup-meaning');
const popupClose = document.querySelector('.popup-close');

// í˜„ì¬ ë‚ ì§œ ì„¤ì • (YYYYMMDD í˜•ì‹)
function getCurrentDate() {
    const now = new Date();
    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const day = String(now.getDate()).padStart(2, '0');
    return `${year}${month}${day}`;
}

// í˜„ì¬ ë‚ ì§œì˜ ë‹¨ì–´ë“¤ ê°€ì ¸ì˜¤ê¸°
function getWordsForDate(date) {
    return wordsByDate[date] || [];
}

// ì‚¬ìš© ê°€ëŠ¥í•œ ë‚ ì§œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
function getAvailableDates() {
    return Object.keys(wordsByDate).sort();
}


// ë‹¨ì–´ ìŒì„± ì¬ìƒ (ì›¹ TTS ì‚¬ìš©)
function playWordAudio(word, language) {
    if ('speechSynthesis' in window) {
        // ê¸°ì¡´ ìŒì„± ì¤‘ì§€
        speechSynthesis.cancel();
        
        const utterance = new SpeechSynthesisUtterance(word);
        
        // ì–¸ì–´ ì„¤ì •
        if (language === 'en-GB') {
            utterance.lang = 'en-GB';
        } else if (language === 'ko-KR') {
            utterance.lang = 'ko-KR';
        } else {
            utterance.lang = 'en-US';
        }
        
        // ìŒì„± ì†ë„ì™€ ë³¼ë¥¨ ì„¤ì •
        utterance.rate = 0.8;
        utterance.volume = 1.0;
        utterance.pitch = 1.0;
        
        // ìŒì„± ì¬ìƒ
        speechSynthesis.speak(utterance);
    } else {
        console.error('Speech synthesis not supported');
        alert('ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„± ì¬ìƒì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    }
}

// ëª¨ë“  ë‹¨ì–´ í‘œì‹œ (ëª¨ë“  ë‚ ì§œë¥¼ ì•„ë˜ë¡œ ì­‰ ë‚˜ì—´)
function displayAllWords() {
    const availableDates = getAvailableDates();
    let allWordsHTML = '';
    
    availableDates.forEach(date => {
        const words = getWordsForDate(date);
        let wordsText = '';
        
        if (words.length > 0) {
            words.forEach((word, index) => {
                wordsText += `${index + 1}. <strong>${word.word}</strong> / ${word.korean_pronunciation} / ${word.english_pronunciation} / ${word.meaning} <button class="play-audio-btn" onclick="playWordAudio('${word.word}', '${word.language}')">ğŸ”Š</button><br>`;
            });
            
            allWordsHTML += `
                <div class="words-title">ì˜¤ëŠ˜ì˜ ë‰´ìŠ¤ ë‹¨ì–´(${date})</div>
                <div class="words-text">${wordsText}</div>
            `;
        }
    });
    
    wordContainer.innerHTML = allWordsHTML;
}




// ì´ˆê¸°í™”
function init() {
    displayAllWords();
}

// ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
document.addEventListener('DOMContentLoaded', function() {
    // ë‹¨ì–´ì¥ ì´ˆê¸°í™”
    init();
    
    // íŒì—… ê´€ë ¨ ì´ë²¤íŠ¸
    if (popupClose) {
    popupClose.addEventListener('click', closePopup);
    }
    
    // íŒì—… ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
    if (wordPopup) {
    wordPopup.addEventListener('click', function(e) {
        if (e.target === wordPopup) {
            closePopup();
        }
    });
    }
});

// íŒì—… ë‹«ê¸°
function closePopup() {
    if (wordPopup) {
    wordPopup.style.display = 'none';
    }
}

// í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
document.addEventListener('keydown', function(e) {
    // Escapeë¡œ íŒì—… ë‹«ê¸°
    if (e.key === 'Escape') {
        closePopup();
    }
});

